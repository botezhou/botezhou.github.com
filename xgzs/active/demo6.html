<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="author" content="智能社 - zhinengshe.com">
<meta name="copyright" content="智能社 - zhinengshe.com">
<title>智能社 - www.zhinengshe.com</title>
<style>
	#box{width:900px;height:600px; background:url(../img/3.jpg) no-repeat; margin:0px auto; position:relative;background-size:100%; }
	#box span{width:100px;height:100px; position:absolute; left:174px; top:39px; background:url(../img/3.jpg) -174px -39px no-repeat; opacity:0;}
</style>
<script src="../move.js"></script>
<script>
window.onload = function(){
	var oBox =document.getElementById('box');	
	var oBtn =document.getElementById('btn');	
	var row = 6;
	var col = 9;
	
	for(var r = 0;r<row;r++){
		for(var c = 0;c<col;c++){
			var oS = document.createElement('span');
			
			oS.style.width = oBox.offsetWidth/col+'px';
			oS.style.height = oBox.offsetHeight/row+'px';
			oS.style.left =	c*oBox.offsetWidth/col +'px'; 
			oS.style.top =	r*oBox.offsetHeight/row +'px'; 
			oBox.appendChild(oS);
			oS.style.backgroundPosition = '-'+c*oS.offsetWidth+'px -'+r*oS.offsetHeight+'px';
			oS.r = r;
			oS.c = c;
			
		}
	}
	var timer = null;
	var aSpan = oBox.children;
	var iNow = 2;
	oBtn.onclick = function(){
		//出来
		var i = 0;
		iNow++;
		if(iNow%9 == 0){
			oBox.style.backgroundImage = 'url(../img/9.jpg)';
		}else{
			oBox.style.backgroundImage = 'url(../img/'+(iNow%9-1)+'.jpg)';
		}
		for(var i = 0;i<aSpan.length;i++){
			(function(index){
				timer=setTimeout(function(){
					aSpan[index].style.backgroundImage = 'url(../img/'+iNow%9+'.jpg)';
					aSpan[index].style.opacity = 0;
					move(aSpan[index],{opacity:1});
					
					i++;
					if(i == aSpan.length){
						clearTimeout(timer);
					}
				},100*(aSpan[index].r+aSpan[index].c));				
				
			})(i);
		}
	};
};
</script>
</head>
<body>
	<input type="button" value="下一张" id="btn">
	<div id="box">
    	
   	</div>
</body>
</html>
